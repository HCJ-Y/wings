(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"374c":function(t,n,e){"use strict";e("6a54");var i=e("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("5c47"),e("0506");var s=i(e("2634")),a=i(e("2fdc")),o=(i(e("c78b")),{data:function(){return{phone:"",password:"",code:"",time:1e4,is_can_send:!0,is_resend:!1,is_code_login:!1,role:4,isAgree:!0}},onLoad:function(t){this.role=t.role||4},onHide:function(){getApp().globalData.isLoginBack=!0},onUnload:function(){getApp().globalData.isLoginBack=!0},methods:{backAction:function(){uni.setStorageSync("token",null),uni.setStorageSync("isLogin",!1),getApp().globalData.isLogin=!1,getApp().globalData.isLoginBack=!0,uni.navigateBack()},toUseragree:function(){this.$config.navTo("pages/login/protocol",{title:"用户协议"})},toUserprivacy:function(){this.$config.navTo("pages/login/protocol",{title:"隐私协议"})},registAction:function(){this.$config.navTo("pages/login/regist")},countdownChange:function(t){0==t.seconds&&(this.is_can_send=!0,this.is_resend=!0)},sendCodeAction:function(){this.getCodeHttp()},getCodeHttp:function(){var t=this;return(0,a.default)((0,s.default)().mark((function n(){var e;return(0,s.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e=t,n.next=3,t.$http({url:"/api/login/send_eamil",data:{username:e.phone,event:"mobilelogin"}});case 3:n.sent,t.is_can_send=!1,t.time=59e3;case 6:case"end":return n.stop()}}),n)})))()},loginAction:function(){var t=this;return(0,a.default)((0,s.default)().mark((function n(){var e,i;return(0,s.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.is_code_login){n.next=6;break}if(!uni.$u.test.isEmpty(t.code)){n.next=4;break}return t.$config.showToast(t.$t("qsryzm")),n.abrupt("return");case 4:n.next=9;break;case 6:if(!uni.$u.test.isEmpty(t.password)){n.next=9;break}return t.$config.showToast(t.$t("qsrmm")),n.abrupt("return");case 9:if(t.isAgree){n.next=12;break}return t.$config.showToast(t.$t("login.agree_toast")),n.abrupt("return");case 12:return e=t,n.next=15,t.$http({url:"/api/login/index",data:{username:e.phone,password:e.is_code_login?null:e.password,code:e.is_code_login?e.code:null}});case 15:i=n.sent,e.successLogin(i.data.token);case 17:case"end":return n.stop()}}),n)})))()},successLogin:function(t){var n=this;uni.setStorageSync("token",t),getApp().globalData.token=t,this.$config.getMyInfoHttp((function(){getApp().globalData.isLogin=!0,getApp().globalData.is_sansuo=!1,uni.setStorageSync("isLogin",!0),n.$config.navTo("pages/index/index")}))}}});n.default=o},"4d25":function(t,n,e){"use strict";e.d(n,"b",(function(){return s})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return i}));var i={uniNavBar:e("1b52").default,uCountDown:e("a467").default,uniIcons:e("e7d0").default},s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"flex-col align-center bcfff",staticStyle:{height:"100vh"}},[e("uni-nav-bar",{attrs:{fixed:!0,"status-bar":!0,shadow:!1,border:!1,"right-width":"200rpx"}}),e("v-uni-view",{staticClass:"wb88 flex-col align-center bcfff br20 mt140"},[e("v-uni-view",{staticClass:"lh100 c222 fs40 fwb wb100"},[t._v(t._s(t.is_code_login?t.$t("yzmdl"):t.$t("mmdl")))]),e("v-uni-view",{staticClass:"flex-row align-center h100 br20 plr30 wb100 bcF5F5F5 mt100"},[e("v-uni-image",{staticClass:"wh48 mr10",attrs:{src:"/static/imgs/phone.png",mode:""}}),e("v-uni-input",{staticClass:"fs28 flex1",attrs:{type:"email",inputmode:"email",placeholder:t.$t("qsryx")},model:{value:t.phone,callback:function(n){t.phone=n},expression:"phone"}})],1),t.is_code_login?e("v-uni-view",{staticClass:"flex-row align-center h100 br20 plr30 wb100 bcF5F5F5 mt30"},[e("v-uni-image",{staticClass:"wh48 mr10",attrs:{src:"/static/imgs/yzm.png",mode:""}}),e("v-uni-input",{staticClass:"fs28 flex1",attrs:{type:"number",maxlength:"6",value:"",placeholder:t.$t("qsryzm")},model:{value:t.code,callback:function(n){t.code=n},expression:"code"}}),t.is_can_send?e("v-uni-text",{staticClass:"c8000FF",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.sendCodeAction.apply(void 0,arguments)}}},[t._v(t._s(t.is_resend?t.$t("cxhq"):t.$t("hqyzm")))]):e("v-uni-view",{staticClass:"flex-row align-center"},[e("v-uni-text",{staticClass:"c666"},[t._v(t._s(t.$t("yfs")))]),e("u-count-down",{attrs:{time:t.time,format:"ss"},on:{change:function(n){arguments[0]=n=t.$handleEvent(n),t.countdownChange.apply(void 0,arguments)}}}),e("v-uni-text",{staticClass:"c666"},[t._v("s")])],1)],1):e("v-uni-view",{staticClass:"flex-row align-center h100 br20 plr30 wb100 bcF5F5F5 mt30"},[e("v-uni-image",{staticClass:"wh48 mr10",attrs:{src:"/static/imgs/psw.png",mode:""}}),e("v-uni-input",{staticClass:"fs28 flex1",attrs:{password:!0,placeholder:t.$t("qsrmm")},model:{value:t.password,callback:function(n){t.password=n},expression:"password"}}),t.is_code_login?t._e():e("v-uni-text",{staticClass:"c8000FF",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.$config.navTo("pages/login/repassword")}}},[t._v(t._s(t.$t("wjmm")))])],1),e("v-uni-button",{staticClass:"cfff bc8000FF h90 br45 center lh90 wb92 mt80",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.loginAction.apply(void 0,arguments)}}},[t._v(t._s(t.$t("dl")))]),e("v-uni-button",{staticClass:"cfff b8000FF1 h90 br45 center lh90 wb92 mt30 c8000FF",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.trueregistAction.apply(void 0,arguments)}}},[t._v(t._s(t.$t("zc")))])],1),e("v-uni-view",{staticClass:"flex-row align-center mt20",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.isAgree=!t.isAgree}}},[e("uni-icons",{attrs:{type:t.isAgree?"checkbox-filled":"circle",color:"#8000FF",size:"20"}}),e("v-uni-view",{staticClass:"lh44 fs24 c999"},[t._v(t._s(t.$t("ytybyd"))),e("v-uni-text",{staticClass:"c333",on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.toUseragree.apply(void 0,arguments)}}},[t._v("《"+t._s(t.$t("yhxy"))+"》")]),t._v(t._s(t.$t("he"))),e("v-uni-text",{staticClass:"c333",on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.toUserprivacy.apply(void 0,arguments)}}},[t._v("《"+t._s(t.$t("yszc"))+"》")])],1)],1),t._e()],1)},a=[]},7034:function(t,n,e){"use strict";e.r(n);var i=e("4d25"),s=e("80f2");for(var a in s)["default"].indexOf(a)<0&&function(t){e.d(n,t,(function(){return s[t]}))}(a);var o=e("828b"),c=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,"6838d60a",null,!1,i["a"],void 0);n["default"]=c.exports},"80f2":function(t,n,e){"use strict";e.r(n);var i=e("374c"),s=e.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(a);n["default"]=s.a}}]);